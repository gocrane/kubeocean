# Default values for kubeocean
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration
global:
  # Image registry and repository
  imageRegistry: "ccr.ccs.tencentyun.com/tkeimages"
  # Image pull policy
  imagePullPolicy: IfNotPresent
  # Image pull secrets
  imagePullSecrets: []
  # Node selector
  nodeSelector: {}
  # Tolerations
  tolerations: []
  # Affinity
  affinity: {}

# Manager configuration
manager:
  # Enable manager deployment
  enabled: true
  # Image configuration
  image:
    repository: kubeocean-manager
    tag: v0.1.1
    pullPolicy: IfNotPresent
  # Replica count
  replicas: 2
  # Resources
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  # Service account
  serviceAccount:
    create: true
    name: kubeocean-manager
    annotations: {}
  # RBAC configuration
  rbac:
    create: true
    # Cluster role name
    clusterRoleName: kubeocean-manager
    # Cluster role binding name
    clusterRoleBindingName: kubeocean-manager
  # Leader election configuration
  leaderElection:
    enabled: true
    id: kubeocean-manager-leader
    leaseDuration: 15s
    renewDeadline: 10s
    retryPeriod: 2s
  # Kubernetes client configuration
  kubeClient:
    qps: 0  # QPS for kubernetes client (default 0 means no limit)
    burst: 0  # Burst for kubernetes client (default 0 means no limit)
  # Metrics configuration
  metrics:
    enabled: true
    port: 8080
    service:
      enabled: true
      type: ClusterIP
      port: 8080
  # Health probe configuration
  healthProbe:
    enabled: true
    port: 8081
    livenessProbe:
      initialDelaySeconds: 15
      periodSeconds: 20
    readinessProbe:
      initialDelaySeconds: 5
      periodSeconds: 10
  # Pod security context
  podSecurityContext: {}
  # Container security context
  containerSecurityContext: {}
  # Volume mounts
  volumeMounts:
    - name: syncer-template
      mountPath: /etc/kubeocean/syncer-template
      readOnly: true
    - name: proxier-template
      mountPath: /etc/kubeocean/proxier-template
      readOnly: true
    - name: tz-config
      mountPath: /etc/localtime
      readOnly: true
  # Volumes
  volumes:
    - name: syncer-template
      configMap:
        name: kubeocean-syncer-template
    - name: proxier-template
      configMap:
        name: kubeocean-proxier-template
    - name: tz-config
      hostPath:
        path: /etc/localtime

# Syncer configuration
syncer:
  # Enable syncer deployment (managed by manager)
  enabled: true
  # Image configuration
  image:
    repository: kubeocean-syncer
    tag: v0.1.1
    pullPolicy: IfNotPresent
  # Default replica count for syncer instances
  replicas: 2
  # Resources
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  # Service account
  serviceAccount:
    create: true
    name: kubeocean-syncer
    annotations: {}
  # RBAC configuration
  rbac:
    create: true
    # Cluster role name
    clusterRoleName: kubeocean-syncer
    # Cluster role binding name
    clusterRoleBindingName: kubeocean-syncer
  # Leader election configuration
  leaderElection:
    enabled: true
    leaseDuration: 15s
    renewDeadline: 10s
    retryPeriod: 2s
  # Kubernetes client configuration
  kubeClient:
    virtual:
      qps: 0  # QPS for virtual kubernetes client (default 0 means no limit)
      burst: 0  # Burst for virtual kubernetes client (default 0 means no limit)
    physical:
      qps: 0  # QPS for physical kubernetes client (default 0 means no limit)
      burst: 0  # Burst for physical kubernetes client (default 0 means no limit)
  # Metrics configuration
  metrics:
    enabled: true
    port: 8080
  # Health probe configuration
  healthProbe:
    enabled: true
    port: 8081
    livenessProbe:
      initialDelaySeconds: 15
      periodSeconds: 20
    readinessProbe:
      initialDelaySeconds: 5
      periodSeconds: 10
  # Pod security context
  podSecurityContext: {}
  # Container security context
  containerSecurityContext: {}
  # Volume mounts
  volumeMounts:
    - name: tz-config
      mountPath: /etc/localtime
      readOnly: true
  # Volumes
  volumes:
    - name: tz-config
      hostPath:
        path: /etc/localtime

  # VNode Prometheus server base port used in annotations
  prometheusVNodeBasePort: 9006

# Proxier configuration
proxier:
  # Enable proxier deployment (managed by manager)
  enabled: true
  # Image configuration
  image:
    repository: kubeocean-proxier
    tag: v0.1.1
    pullPolicy: IfNotPresent
  # Default replica count for proxier instances
  replicas: 2
  # Listen port for kubelet API requests
  listenPort: 10250
  # Resources
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi
  # Service account
  serviceAccount:
    create: true
    name: kubeocean-proxier
    annotations: {}
  # RBAC configuration
  rbac:
    create: true
    # Cluster role name
    clusterRoleName: kubeocean-proxier
    # Cluster role binding name
    clusterRoleBindingName: kubeocean-proxier
  # Metrics configuration
  metrics:
    enabled: false
    port: 8080
    # Metrics collection configuration
    collection:
      enabled: true
      interval: 60
      targetNamespace: "kubeocean-worker"
  # TLS configuration
  tls:
    enabled: false
    secretName: ""
    secretNamespace: ""
  # Health probe configuration
  healthProbe:
    enabled: true
    port: 10250
    livenessProbe:
      initialDelaySeconds: 15
      periodSeconds: 20
    readinessProbe:
      initialDelaySeconds: 5
      periodSeconds: 10
  # Pod security context
  podSecurityContext: {}
  # Container security context
  containerSecurityContext: {}
  # Volume mounts
  volumeMounts: []
  # Volumes
  volumes: []

# CRD configuration
crd:
  # Enable CRD installation
  enabled: true
  # CRD names
  names:
    clusterBinding: clusterbindings.cloud.tencent.com

# Namespace configuration
namespace:
  # Create namespace
  create: true
  # Namespace name
  name: kubeocean-system
  # Namespace labels
  labels:
    app.kubernetes.io/component: manager
    app.kubernetes.io/created-by: kubeocean
    app.kubernetes.io/instance: system
    app.kubernetes.io/managed-by: helm
    app.kubernetes.io/name: namespace
    app.kubernetes.io/part-of: kubeocean
    control-plane: kubeocean-manager

# Security context configuration
securityContext: {}

# Logging configuration
logging:
  # Log level
  level: debug
  # Log format
  format: console

# Feature flags
features:
  # Enable leader election
  leaderElection: true
  # Enable metrics
  metrics: true
  # Enable health probes
  healthProbes: true
  # Enable finalizers
  finalizers: true
  # Enable webhooks
  webhooks: false
